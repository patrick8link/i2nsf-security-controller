<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>confd.fsm API documentation</title>
<meta name="description" content="Internally used classes and functions â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<style>
#pubhub-container .pubhub-doc-container article#content,
#pubhub-container .pubhub-doc-container nav#sidebar {
width: inherit;
height: inherit;
}
</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>confd.fsm</code></h1>
</header>
<section id="section-intro">
<p>Internally used classes and functions.</p>
<p>This module implements a Finite State Machine (FSM). In addition to state
this FSM also maintains a user defined "memory". So this FSM can be used as a
Push-down Automata (PDA) since a PDA is a FSM + memory.</p>
<p>The following describes how the FSM works, but you will probably also need to
see the example function to understand how the FSM is used in practice.</p>
<p>You define an FSM by building tables of transitions. For a given input symbol
the process() method uses these tables to decide what action to call and what
the next state will be. The FSM has a table of transitions that associate:</p>
<pre><code>    (input_symbol, current_state) --&gt; (action, next_state)
</code></pre>
<p>Where "action" is a function you define. The symbols and states can be any
objects. You use the add_transition() and add_transition_list() methods to add
to the transition table. The FSM also has a table of transitions that
associate:</p>
<pre><code>    (current_state) --&gt; (action, next_state)
</code></pre>
<p>You use the add_transition_any() method to add to this transition table. The
FSM also has one default transition that is not associated with any specific
input_symbol or state. You use the set_default_transition() method to set the
default transition.</p>
<p>When an action function is called it is passed a reference to the FSM. The
action function may then access attributes of the FSM such as input_symbol,
current_state, or "memory". The "memory" attribute can be any object that you
want to pass along to the action functions. It is not used by the FSM itself.
For parsing you would typically pass a list to be used as a stack.</p>
<p>The processing sequence is as follows. The process() method is given an
input_symbol to process. The FSM will search the table of transitions that
associate:</p>
<pre><code>    (input_symbol, current_state) --&gt; (action, next_state)
</code></pre>
<p>If the pair (input_symbol, current_state) is found then process() will call the
associated action function and then set the current state to the next_state.</p>
<p>If the FSM cannot find a match for (input_symbol, current_state) it will then
search the table of transitions that associate:</p>
<pre><code>    (current_state) --&gt; (action, next_state)
</code></pre>
<p>If the current_state is found then the process() method will call the
associated action function and then set the current state to the next_state.
Notice that this table lacks an input_symbol. It lets you define transitions
for a current_state and ANY input_symbol. Hence, it is called the "any" table.
Remember, it is always checked after first searching the table for a specific
(input_symbol, current_state).</p>
<p>For the case where the FSM did not match either of the previous two cases the
FSM will try to use the default transition. If the default transition is
defined then the process() method will call the associated action function and
then set the current state to the next_state. This lets you define a default
transition as a catch-all case. You can think of it as an exception handler.
There can be only one default transition.</p>
<p>Finally, if none of the previous cases are defined for an input_symbol and
current_state then the FSM will raise an exception. This may be desirable, but
you can always prevent this just by defining a default transition.</p>
<p>Noah Spurrier 20020822</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="confd.fsm.ExceptionFSM"><code class="flex name class">
<span>class <span class="ident">ExceptionFSM</span></span>
<span>(</span><span>value)</span>
</code></dt>
<dd>
<div class="desc"><p>This is the FSM Exception class.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="builtins.Exception" href="https://docs.python.org/3/library/typing.html#typing.builtins.Exception">builtins.Exception</a></li>
<li><a title="builtins.BaseException" href="https://docs.python.org/3/library/typing.html#typing.builtins.BaseException">builtins.BaseException</a></li>
</ul>
</dd>
<dt id="confd.fsm.FSM"><code class="flex name class">
<span>class <span class="ident">FSM</span></span>
<span>(</span><span>initial_state, memory=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This is a Finite State Machine (FSM).</p>
<p>This creates the FSM. You set the initial state here. The "memory"
attribute is any object that you want to pass along to the action
functions. It is not used by the FSM. For parsing you would typically
pass a list to be used as a stack.</p></div>
<h3>Methods</h3>
<dl>
<dt id="confd.fsm.FSM.add_transition"><code class="name flex">
<span>def <span class="ident">add_transition</span></span>(<span>self, input_symbol, state, action=None, next_state=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This adds a transition that associates:</p>
<pre><code>    (input_symbol, current_state) --&gt; (action, next_state)
</code></pre>
<p>The action may be set to None in which case the process() method will
ignore the action and only set the next_state. The next_state may be
set to None in which case the current state will be unchanged.</p>
<p>You can also set transitions for a list of symbols by using
add_transition_list().</p></div>
</dd>
<dt id="confd.fsm.FSM.add_transition_any"><code class="name flex">
<span>def <span class="ident">add_transition_any</span></span>(<span>self, state, action=None, next_state=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This adds a transition that associates:</p>
<pre><code>    (current_state) --&gt; (action, next_state)
</code></pre>
<p>That is, any input symbol will match the current state.
The process() method checks the "any" state associations after it first
checks for an exact match of (input_symbol, current_state).</p>
<p>The action may be set to None in which case the process() method will
ignore the action and only set the next_state. The next_state may be
set to None in which case the current state will be unchanged.</p></div>
</dd>
<dt id="confd.fsm.FSM.add_transition_list"><code class="name flex">
<span>def <span class="ident">add_transition_list</span></span>(<span>self, list_input_symbols, state, action=None, next_state=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This adds the same transition for a list of input symbols.
You can pass a list or a string. Note that it is handy to use
string.digits, string.whitespace, string.letters, etc. to add
transitions that match character classes.</p>
<p>The action may be set to None in which case the process() method will
ignore the action and only set the next_state. The next_state may be
set to None in which case the current state will be unchanged.</p></div>
</dd>
<dt id="confd.fsm.FSM.get_transition"><code class="name flex">
<span>def <span class="ident">get_transition</span></span>(<span>self, input_symbol, state)</span>
</code></dt>
<dd>
<div class="desc"><p>This returns (action, next state) given an input_symbol and state.
This does not modify the FSM state, so calling this method has no side
effects. Normally you do not call this method directly. It is called by
process().</p>
<p>The sequence of steps to check for a defined transition goes from the
most specific to the least specific.</p>
<ol>
<li>
<p>Check state_transitions[] that match exactly the tuple,
(input_symbol, state)</p>
</li>
<li>
<p>Check state_transitions_any[] that match (state)
In other words, match a specific state and ANY input_symbol.</p>
</li>
<li>
<p>Check if the default_transition is defined.
This catches any input_symbol and any state.
This is a handler for errors, undefined states, or defaults.</p>
</li>
<li>
<p>No transition was defined. If we get here then raise an exception.</p>
</li>
</ol></div>
</dd>
<dt id="confd.fsm.FSM.process"><code class="name flex">
<span>def <span class="ident">process</span></span>(<span>self, input_symbol)</span>
</code></dt>
<dd>
<div class="desc"><p>This is the main method that you call to process input. This may
cause the FSM to change state and call an action. This method calls
get_transition() to find the action and next_state associated with the
input_symbol and current_state. If the action is None then the action
is not called and only the current state is changed. This method
processes one complete input symbol. You can process a list of symbols
(or a string) by calling process_list().</p></div>
</dd>
<dt id="confd.fsm.FSM.process_list"><code class="name flex">
<span>def <span class="ident">process_list</span></span>(<span>self, input_symbols)</span>
</code></dt>
<dd>
<div class="desc"><p>This takes a list and sends each element to process(). The list may
be a string or any iterable object.</p></div>
</dd>
<dt id="confd.fsm.FSM.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This sets the current_state to the initial_state and sets
input_symbol to None. The initial state was set by the constructor
<strong>init</strong>().</p></div>
</dd>
<dt id="confd.fsm.FSM.set_default_transition"><code class="name flex">
<span>def <span class="ident">set_default_transition</span></span>(<span>self, action, next_state)</span>
</code></dt>
<dd>
<div class="desc"><p>This sets the default transition. This defines an action and
next_state if the FSM cannot find the input symbol and the current
state in the transition list and if the FSM cannot find the
current_state in the transition_any list. This is useful as a final
fall-through state for catching errors and undefined states.</p>
<p>The default transition can be removed by setting the attribute
default_transition to None.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="confd" href="index.html">confd</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="confd.fsm.ExceptionFSM" href="#confd.fsm.ExceptionFSM">ExceptionFSM</a></code></h4>
</li>
<li>
<h4><code><a title="confd.fsm.FSM" href="#confd.fsm.FSM">FSM</a></code></h4>
<ul class="">
<li><code><a title="confd.fsm.FSM.add_transition" href="#confd.fsm.FSM.add_transition">add_transition</a></code></li>
<li><code><a title="confd.fsm.FSM.add_transition_any" href="#confd.fsm.FSM.add_transition_any">add_transition_any</a></code></li>
<li><code><a title="confd.fsm.FSM.add_transition_list" href="#confd.fsm.FSM.add_transition_list">add_transition_list</a></code></li>
<li><code><a title="confd.fsm.FSM.get_transition" href="#confd.fsm.FSM.get_transition">get_transition</a></code></li>
<li><code><a title="confd.fsm.FSM.process" href="#confd.fsm.FSM.process">process</a></code></li>
<li><code><a title="confd.fsm.FSM.process_list" href="#confd.fsm.FSM.process_list">process_list</a></code></li>
<li><code><a title="confd.fsm.FSM.reset" href="#confd.fsm.FSM.reset">reset</a></code></li>
<li><code><a title="confd.fsm.FSM.set_default_transition" href="#confd.fsm.FSM.set_default_transition">set_default_transition</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>